<div xmlns:nxu="http://nuxeo.org/nxweb/util"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:a4j="http://richfaces.org/a4j"
     xmlns:c="http://java.sun.com/jstl/core"
     xmlns:nxh="http://nuxeo.org/nxweb/html"
     xmlns:nxl="http://nuxeo.org/nxforms/layout"
     xmlns:nxd="http://nuxeo.org/nxweb/document"
     class="content_block">

  <h3 class="summaryTitle">#{messages['heading.speechTranscription']}</h3>

  <c:if test="#{value.hasFacet('HasSpeechTranscription')}">
  <div class="transcription" style="max-height: 400px; overflow: scroll; margin-bottom: 2em">
    <ui:repeat value="#{value.trans.sections}" var="section">
      <p dir="#{value.dc.language == 'ar' ? 'RTL' : 'LTR'}">
        <h:outputText value="#{section.text}" /></p>
    </ui:repeat>
  </div>
  </c:if>

  <p>
  <nxu:set var="transcriptionStatus"
    value="#{transcriptionActions.getTranscriptionStatus(value)}">
    <c:if test="#{not empty transcriptionStatus}">
      #{transcriptionActions.getStatusMessageFor(transcriptionStatus)}
    </c:if>
    <c:if test="#{empty transcriptionStatus}">
      <h:commandButton value="#{messages['action.media.launchTranscription']}"
        action="#{transcriptionActions.launchTranscription(value)}"
        class="button smallButton" />
    </c:if>
  </nxu:set>
  </p>

</div>
